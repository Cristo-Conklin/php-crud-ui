<ul class="breadcrumb">
    <li><a href="{{base}}/">Home</a></li>
    <li><a href="{{base}}/{{table}}/list">{{table|humanize}}</a></li>
</ul>

<div class="titlebar">
    <h1>{{table|humanize}}</h1>
    <div>
        <a onclick="document.querySelector('.addFilter').classList.toggle('visible');" href="#" class="icon filter">Add
            filter</a>
        <a onclick="document.querySelector('.addSearch').classList.toggle('visible');" href="#"
            class="icon search">Search</a>
        {{if:primaryKey}}
        <a href="{{base}}/{{table}}/create" class="btn">New item</a>
        {{endif}}
    </div>
</div>

<script src="{{base}}/js/list.js"></script>

{{for:filter:i:filters}}
<div class="filterbar" data-index="{{i}}"
    data-filter="{{filter.field}},{{filter.operator}},{{filter.value}},{{filter.name}}">
    <div>{{filter.field|humanize}} = '{{filter.name}}'</div>

    <a class="close" href="{{base}}/{{table}}/list" title="Clear filters" onclick="return closeFilter('{{i}}');"></a>
</div>
{{endfor}}

<div class="addFilter">
    <form style="display:inline">
        <select name="field">
            {{for:column:columns}}
            <option>{{column|humanize}}</option>
            {{endfor}}
        </select>&nbsp;
        <select name="operator">
            <option>=</option>
            <option>&lt;</option>
            <option>&gt;</option>
        </select>&nbsp;
        <input type="text" name="value" />&nbsp;
        <input type="submit" value="Filter" />
    </form>
</div>

<div class="addSearch">
    <form style="display:inline" method="post">
        <input type="text" name="search" />&nbsp;
        <input type="submit" value="Search" />
    </form>
</div>

<table class="table list">
    <thead>
        <tr>
            {{if:primaryKey}}
            <th>Action</th>
            {{endif}}
            {{for:column:columns}}
            {{if:column.text|neq(primaryKey)}}
            <th>{{column.text|humanize}}</th>
            {{endif}}
            {{endfor}}
        </tr>
    </thead>
    <tbody>
        {{for:record:records}}
        <tr>
            {{for:field:name:record}}
            {{if:name|eq(primaryKey)}}
            <td><a href="{{base}}/{{table}}/read/{{field.value}}">view</a></td>
            {{endif}}
            {{if:name|neq(primaryKey)}}
            {{if:field.table}}
            <td><a href="{{base}}/{{field.table}}/read/{{field.value}}">{{field.text}}</a></td>
            {{else}}
            <td>{{field.text}}</td>
            {{endif}}
            {{endif}}
            {{endfor}}
        </tr>
        {{endfor}}
    </tbody>
</table>
{{if:maxPage|gt(1)}}
<div class="pagination" data-page="{{pageNumber}},{{pageSize}}">
    {{if:pageNumber|gt(1)}}
    <a href="?page={{pageNumber|sub(1)}},{{pageSize}}" class="icon prev"
        onclick="return navigatePage('{{pageNumber|sub(1)}},{{pageSize}}')">&lt;</a>
    {{else}}
    <a href="javascript:void(0);" class="icon prev disabled">&lt;</a>
    {{endif}}
    &nbsp;page {{pageNumber}}/{{maxPage}}&nbsp;
    {{if:pageNumber|lt(maxPage)}}
    <a href="?page={{pageNumber|add(1)}},{{pageSize}}" class="icon next"
        onclick="return navigatePage('{{pageNumber|add(1)}},{{pageSize}}')">&gt;</a>
    {{else}}
    <a href="javascript:void(0);" class="icon next disabled">&gt;</a>
    {{endif}}
</div>
{{endif}}
<div class="footeractions">
    <a href="{{base}}/{{table}}/export" class="btn">Export</a>

</div>